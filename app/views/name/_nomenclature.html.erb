<%# Nomenclature partial; used by show_name and add_comment %>
<div class="row">
  <div class="col-sm-7 name-section">

    <p><%= :RANK.t %>:
       <%= name.rank ? rank_as_string(name.rank) : :unknown.t %></p>
    <p><%= :STATUS.t %>: <%= name.status %>
      <% if name.is_misspelling? %>
        (<%= :MISSPELLED.t %>)
      <% end %></p>
    <p><%= :NAME.t %>: <%= h(name.real_text_name) %></p>

  </div>

  <div class="col-sm-5 name-section">
    <% if name.icn_identifier? %>
      <p><%= :ICN_IDENTIFIER.t %>: [#<%= name.icn_identifier %>]</p>
      <p><%= link_to(:index_fungorum_record.t,
                     index_fungorum_record_url(name.icn_identifier),
                     { target: "_blank" }) %></p>
      <p><%= link_to(:mycobank_record.t,
                     mycobank_record_url(name.icn_identifier),
                     { target: "_blank" }) %></p>
    <% elsif name.registrable? %>
      <p><%= :ICN_IDENTIFIER.t %>:
        <em><%= :show_name_icn_id_missing.t %></em></p>
      <p><%= link_to(:mycobank_search.t, mycobank_search_url(name),
                     target: :_blank) %></p>
    <% end %>
  </div>

</div>

<p><%= :AUTHORITY.t %>: <%= name.author.to_s.t %></p>
<p><%= :CITATION.t %>: <%= name.citation.to_s.tl %></p>
<%
if name.is_misspelling? %>
  <p><%= :show_name_misspelling_correct.t %>:
  <%=
  if name.correct_spelling
    link_with_query(name.correct_spelling.display_name.t,
                    controller: :name,
                    action: :show_name,
                    id: name.correct_spelling_id)
  else
    # This can apparently happen for past_names.
    name.correct_spelling_id
  end %>
  </p>
<%
end %>

<%
if synonyms
  approved_synonyms, deprecated_synonyms = name.sort_synonyms
  misspellings = deprecated_synonyms.select(&:correct_spelling_id)
  deprecated_synonyms.reject!(&:correct_spelling_id)
  if approved_synonyms.try(&:any?)
    links = approved_synonyms.map do |n|
      link_with_query(n.display_name.t,
                      controller: :name,
                      action: :show_name,
                      id: n.id,)
    end %>
    <p><%=
    name.deprecated ? :show_name_preferred_synonyms.t : :show_name_synonyms.t
    %>:<%=
    links.safe_join(", ")
    %></p>
  <%
  end
  if deprecated_synonyms.try(&:any?)
    links = deprecated_synonyms.map do |n|
      link_with_query(n.display_name.t,
                      controller: :name,
                      action: :show_name,
                      id: n.id)
    end %>
    <p><%= :show_name_deprecated_synonyms.t %>:
      <%= links.safe_join(", ") %></p>
  <%
  end
  if misspellings.try(&:any?)
    links = misspellings.map do |n|
      link_with_query(n.display_name.t,
                      controller: :name,
                      action: :show_name,
                      id: n.id)
    end %>
    <p><%= :show_name_misspelled_synonyms.t %>:
      <%= links.safe_join(", ") %></p>
  <%
  end
end %>
