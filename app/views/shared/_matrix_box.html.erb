<%
# Requires local variable object: RssLog, Observation, Image, etc. instance.
link_method ||= :get
identify ||= false
presenter = MatrixBoxPresenter.new(object, @view)
columns ||= "col-xs-12 col-sm-6 col-md-4"
object_id = object&.id.present? ? object.id : "no_ID"
locals = local_assigns.except(:columns, :object, :object_counter,
                              :object_iteration)
if presenter
%>
  <li class="matrix-box <%= columns %>" id="box_<%= object_id %>">
    <div class="panel panel-default">
      <div class="panel-body rss-box-details">
        <div class="thumbnail-container">
          <%= if presenter.image_data
            render(partial: "shared/image_thumbnail",
                   locals: locals.merge(presenter.image_data))
          end %>
        </div><!-- .thumbnail-container -->
        <div class="rss-what pt-2">
          <h5><%= link_with_query(presenter.name,
                                  presenter.what.show_link_args) %></h5>
          <%= vote_or_propose_ui(identify, object) %>
        </div><!-- .rss-what -->
        <div class="rss-where">
          <small><%= location_link(presenter.place_name,
                                   presenter.where) %></small>
        </div><!-- .rss-where -->
        <div class="rss-what">
          <small class="nowrap-ellipsis">
            <% unless presenter.when.blank? %>
              <%= presenter.when %>: <%= user_link(presenter.who) %>
            <% end %>
          </small>
        </div><!-- .rss-when -->
        <div class="rss-detail">
          <%= presenter.detail %>
        </div><!-- .rss-detail -->
        <div class="rss-what">
          <small><%= presenter.fancy_time %></small>
        </div><!-- .rss-fancy-time -->
      </div><!-- .panel-body -->
      <%= identify_footer(identify, object_id) %>
    </div><!-- .panel -->
  </li><!-- .matrix-box -->
<% end %>
