<%
  tabs = [
    link_to(:all_objects.t(type: :location),
            controller: :location, action: :list_locations)
  ]
  if @query && @query.is_coercable?(:Observation)
    tabs << link_with_query(:show_objects.t(type: :observation),
                            controller: :observer, action: :index_observation)
  end
  if @query && @query.is_coercable?(:Location)
    tabs << link_with_query(:show_objects.t(type: :location),
                            controller: :location, action: :index_location)
  end
  @tabsets = { right: draw_tab_set(tabs) }
%>

<div class="max-width-text-plus-image">
  <center>
    <%= 
      if @locations.any?
        gmap = make_map(@locations)
        finish_map(gmap)
        gmap.div(width: 800, height: 550).html_safe
      else
        :runtime_map_nothing_to_map.t
      end
    %>
  </center>
</div>
