<%
  @title = :show_name_title.t(name: @name.display_name)

  Textile.register_name(@name)

  tabs = [
    link_with_query(:show_name_edit_name.t, edit_name_path(@name.id)),
    link_with_query(:show_name_add_name.t, new_name_path)
  ]
  if in_admin_mode? || !@name.locked
    tabs << link_with_query(:show_name_change_synonyms.t,
                            edit_name_synonyms_path(@name.id))
    if @name.deprecated
      tabs << link_with_query(:APPROVE.t,
                              approve_name_synonym_form_path(@name.id))
    else
      tabs << link_with_query(:DEPRECATE.t,
                              deprecate_name_synonym_form_path(@name.id))
    end
  end
  tabs += [
    link_with_query(:show_name_email_tracking.t,
                    new_name_tracker_path(@name.id)),
    draw_interest_icons(@name)
  ]
  @tabsets = {
    pager_for: @name,
    right: draw_tab_set(tabs)
  }
  @container = :wide
%>

<div class="row">

  <!--LEFT COLUMN-->
  <div class="col-sm-5">

    <%= render(partial: "names/show/confident_observations_panel") %>

    <div id="name_previous_export" class="mb-4">
      <%= show_previous_version(@name) %>
      <%= set_export_status_controls(@name) %>
    </div>

    <div id="name_authors_editors">
      <div class="panel panel-default">
        <div class="panel-body">
          <%= show_authors_and_editors(@name) %>
        </div>
      </div>
    </div>

  </div><!--LEFT COLUMN-->

  <!--RIGHT COLUMN-->
  <div class="col-sm-7">

    <%= render(partial: "names/show/observation_panel") %>
    <%= render(partial: "names/show/nomenclature",
              locals: { name: @name, synonyms: true }) %>

    <div class="row">
      <%= render(partial: "names/show/classification_panel") %>
      <%= render(partial: "names/show/lifeform_panel") %>
    </div>

    <% inject_javascript_at_end %(
      var d1 = jQuery("#classification_section");
      var d2 = jQuery("#lifeform_section");
      var h1 = d1.height();
      var h2 = d2.height();
      if (h1 > h2) d2.height(h1);
      if (h1 < h2) d1.height(h2);
    ) %>

    <% if @name.has_notes? %>
      <%= render(partial: "names/show/notes_panel") %>
    <% end %>

    <% if !@best_description.blank? %>
      <%= render(partial: "names/show/best_description_panel") %>
    <% end %>

    <%= render(partial: "names/show/descriptions_panel") %>

    <% if @projects && @projects.length > 0 %>
      <%= render(partial: "names/show/projects_panel") %>
    <% end %>

  </div><!--RIGHT COLUMN-->
</div><!--.row-->

<%# ----------------------------------------
  #  Show comments
  # ----------------------------------------
%>
<%= render(partial: "comments/comments_for_object",
           locals: {object: @name, controls: true, limit: nil}) %>
<%= :show_name_num_notifications.t(num: @name.interests) %>
<%= show_object_footer(@name) %>
