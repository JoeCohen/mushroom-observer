<!--[form:image]-->

<% @image = @images[index] %>

<div id="image_<%= index %>_box" class="form_image">

  <p style="white-space:nowrap">
  <%= radio_button(:observation, :thumb_image_id, -index) %>
  <%= custom_file_field(:image, :image, index: index, onchange: "auto_image_new(#{index})") %>

  <% if @js %>
    <span style="margin-left:10px">&nbsp;</span>
    <input id="image_<%=index%>_more" onclick="image_on(<%=index%>);" type="button" class="btn" value="<%=:MORE.t%> »" />
    <input id="image_<%=index%>_less" onclick="image_off(<%=index%>);" type="button" class="btn" value="« <%=:LESS.t%>" style="display:none" />
  <% end %><br/>

  <label for="image_<%= index %>_notes"><%= :NOTES.t %>:</label>
  <%= text_field(:image, :notes, index: index, size: 50) %>
  </p>

  <div id="image_<%= index %>_div" style="line-height:100%<%= "; display:none" if @js %>">
    <p><label for="image_<%= index %>_copyright_holder"><%= :form_images_copyright_holder.t %>:</label>
    <%= text_field(:image, :copyright_holder, index: index) %></p>

    <p><label for="image_<%= index %>_when_1i"><%= :form_images_when_taken.t %>:</label>

    <%= date_select(:image, :when, {index: index, start_year: 1980, end_year: Time.now.year,
                                    order: [:day, :month, :year]},
                    {onchange: "changed_date(#{index})"}) %></p>

    <p><label for="image_<%= index %>_license_id"><%= :form_images_select_license.t %>:</label>
    <%= select(:image, :license_id, @licenses, {value: @image.license_id},
               {id: "image_#{index}_license_id", name: "image[#{index}][license_id]"}) %></p>
  </div>

  <% inject_javascript_at_end %(
    CHANGED_DATES[#{index}] = false;
  ) %>

</div>

<!--[eoform:image]-->
