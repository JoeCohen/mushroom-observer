<%
  @owner_id = owner_id_line(@observation) # must go before show_obs_title
  @title = show_obs_title(@observation)

  tabs = [
    link_with_query(:show_object.t(type: :observation),
                    controller: :observer, action: :show_observation,
                    id: @observation.id)
  ]
  @tabsets = { right: draw_tab_set(tabs) }
%>

<div class="row">
  <div class="col-sm-8 pull-left-sm">

    <table class="table-namings">
      <thead>
        <tr>
          <th><%= content_tag(:h4, :suggestions_title.t) %></th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @suggestions.each do |name, prob, obs, image| %>
          <tr>
            <td>
              <%= link_with_query(name.display_name_brief_authors.t,
                                  controller: :name, action: :show_name,
                                  id: name.id) %><br/>
              <% if @observation.namings.any? {|n| n.name.synonyms.include?(name)} %>
                (<%= :suggestions_already_proposed.t %>)
              <% else %>
                <%= link_with_query(:suggestions_propose_name.t,
                                    { controller: :naming, action: :create,
                                      id: @observation.id,
                                      name: name.search_name },
                                    { class: "btn push-down" }) %>
              <% end %>
             </td>
             <td>
               <%= prob.to_f.round(2) %>%
             </td>
             <td>
               <%= thumbnail(image,
                             link: {controller: obs.show_controller,
                                    action: obs.show_action,
                                    id: obs.id}) if image.present? %>
             </td>
          </tr>
        <% end %>
      </tbody>
    </table>

  </div>
  <div class="col-sm-4 pull-right-sm">
    <%= render(partial: "show_images", locals: { observation: @observation }) %>
  </div>
</div>
