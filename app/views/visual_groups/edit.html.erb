<%
  @title = :edit_visual_group_title.t(name: @visual_group.name)
%>

<p id="notice"><%= notice %></p>

<p>
  <%= link_to(:visual_group_show.t, @visual_group) %> |
  <%= link_to(:visual_group_back_to_index.t,
              visual_model_visual_groups_path(@visual_group.visual_model)) %>
</p>

<%= render 'form', visual_group: @visual_group %>

<hr>

<p>
  <strong><%= :visual_group_includes_names.t %>:</strong><br>
  <% @visual_group.distinct_names.each do |name| %>
  <%= link_to(name[0],
              edit_visual_group_path(@visual_group, filter: name[0]))%><br>
  <% end %>
</p>

<span id="filter_options">
  <hr>
</span>

<strong><%= :edit_visual_group_filter_options.t %></strong>
<%= form_with(url: edit_visual_group_path(@visual_group, anchor: "filter_options"), method: :get,
              id: "visual_group_filters_form") do |form| %>
  <%= form.text_field(:filter, value: @filter, size: 60, id: "filter") %>
  <p>
    <% ["needs_review", "included", "excluded"].each do |a_status| %>
      <%= form.radio_button(:status, a_status, checked: @status == a_status, id: a_status) %>
      <%= form.label(:"status_#{a_status}", :"visual_group_#{a_status}".t, value: a_status, for: a_status) %>
    <% end %>
  </p>

  <p>
    <div class="actions">
      <%= form.submit(:edit_visual_group_update_filter.t) %>
    </div>
  </p>

  <% inject_javascript_at_end %(
    jQuery("#included, #excluded").on("click", function(e){
     jQuery("#filter").val("");
    })
  ) %>
<% end %>

<%= render(partial: "image_matrix",
           locals: { visual_group: @visual_group, status: @status }) %>
<% @container = :full %>

<p>
  <%= link_to(:visual_group_show.t, @visual_group) %> |
  <%= link_to(:visual_group_back_to_index.t,
              visual_model_visual_groups_path(@visual_group.visual_model)) %>
</p>
