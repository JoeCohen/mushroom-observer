<%
  @title ||= :list_herbaria_title.t

  tabs = create_links(@links)
  @tabsets = { right: draw_tab_set(tabs) }

  flash_error(@error) if @error && @objects.empty?
%>

<%= paginate_block(@pages) do %>
  <% if @objects.any? %>
    <table class="table-striped table-herbarium push-down">
      <thead>
        <tr>
          <th><%= :herbarium_herbarium_record_count.t %></th>
          <th><%= :herbarium_code.t %></th>
          <th><%= :NAME.t %></th>
        </tr>
      </thead>
      <tbody>
        <% @objects.each do |herbarium| %>
          <tr>
            <td align="center">
              <%= herbarium.herbarium_records.length %>
            </td>
            <td style="max-width:10em; text-overflow:ellipsis; overflow:hidden">
              <%= herbarium.code %>
            </td>
            <td>
              <%= link_with_query(herbarium.format_name.t,
                                  herbarium.show_link_args) %>
              <% if herbarium.can_edit? || in_admin_mode? %>
                [<%= link_to(:EDIT.t, action: :edit_herbarium, id: herbarium.id) %>]
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% end %>
<% end %>
