<%
  @title = ""
  @container = :wide
%>

<div class="row">
  <div class="col-xs-6">
    <p><%= link_to("Refresh Stats", admin_blocked_ips_path) %></p>

    <%# ----- Okay IPs ----- %>
    <div class="m-3 p-3" style="background:#f7f">
      <%= form_with(url: admin_blocked_ips_path, class: "pb-2",
                    id: "admin_okay_ips_form") do |f| %>
        <div class="form-group form-inline">
          <span class="text-larger">Okay IPs:</span><!-- .text-larger --> &nbsp;&nbsp;
          <%= f.text_field(:add_okay,
                           { value: "", size: 20,
                             data: { autofocus: true },
                             class: "form-control" }) %>
          <%= f.submit(:ADD.l, class: "btn btn-default ml-3") %>
          [<%= link_to(
                "Clear List", admin_blocked_ips_path(clear_okay: 1),
                id: "clear_okay_ips_link"
              ) %>]
        </div>
      <% end %>

      <table id="okay_ips" class="ips">
        <% @okay_ips.each do |ip| %>
          <tr>
            <td><%= ip.t %></td>
            <td>[<%= link_to(
                      :REMOVE.l, admin_blocked_ips_path(remove_okay: ip)
                    ) %>]</td>
        <% end %>
      </table>
    </div>

    <%# ----- Blocked IPs ----- %>
    <div class="m-3 pt-3 pb-4" style="background:#f7f">

      <%= form_with(url: admin_blocked_ips_path,
                    id: "admin_blocked_ips_form") do |f| %>
        <div class="form-group form-inline">
          <span class="text-larger">Blocked IPs:</span><!-- .text-larger --> &nbsp;&nbsp;
          <%= f.text_field(:add_bad,
                           { value: "", size: 20,
                             data: { autofocus: true },
                             class: "form-control" }) %>
          <%= f.submit(:ADD.l, class: "btn btn-default ml-3") %>
          [<%= link_to(
                "Clear List", admin_blocked_ips_path(clear_bad: 1),
                id: "clear_blocked_ips_link"
              ) %>]
        </div>
      <% end %>

      <table id="blocked_ips" class="ips">
        <% @blocked_ips.each do |ip| %>
          <tr>
            <td><%= ip.t %></td>
            <td>[<%= link_to(
                      :REMOVE.l, admin_blocked_ips_path(remove_bad: ip)
                    ) %>]</td>
      <% end %>
      </table>
    </div>
  </div>

  <%# ----- Stats / Most Active Users ----- %>
  <div class="col-xs-6">
    <% if @ip.present? %><p><%= render partial: "ip_stats" %></p><% end %>
    <p><%= render partial: "ip_summary" %></p>
  </div>
</div>
